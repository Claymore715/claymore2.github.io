<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>国王的烦恼 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="历届试题 国王的烦恼问题描述C国由n个小岛组成，为了方便小岛之间联络，C国在小岛间建立了m座大桥，每座大桥连接两座小岛。两个小岛间可能存在多座桥连接。然而，由于海水冲刷，有一些大桥面临着不能使用的危险。 如果两个小岛间的所有大桥都不能使用，则这两座小岛就不能直接到达了。然而，只要这两座小岛的居民能通过其他的桥或者其他的小岛互相到达，他们就会安然无事。但是，如果前一天两个小岛之间还有方法可以到达，后">
<meta property="og:type" content="article">
<meta property="og:title" content="国王的烦恼">
<meta property="og:url" content="http://yoursite.com/2020/10/28/%E5%9B%BD%E7%8E%8B%E7%9A%84%E7%83%A6%E6%81%BC/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="历届试题 国王的烦恼问题描述C国由n个小岛组成，为了方便小岛之间联络，C国在小岛间建立了m座大桥，每座大桥连接两座小岛。两个小岛间可能存在多座桥连接。然而，由于海水冲刷，有一些大桥面临着不能使用的危险。 如果两个小岛间的所有大桥都不能使用，则这两座小岛就不能直接到达了。然而，只要这两座小岛的居民能通过其他的桥或者其他的小岛互相到达，他们就会安然无事。但是，如果前一天两个小岛之间还有方法可以到达，后">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200328173840562.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200328174131940.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200328174332782.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200328174512144.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200328174642280.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200328174833738.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200328175102223.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200328174642280.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200328175302946.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200328175433699.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200328175556822.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200328175721975.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70">
<meta property="article:published_time" content="2020-10-27T23:58:00.000Z">
<meta property="article:modified_time" content="2020-10-28T00:00:04.411Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/20200328173840562.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-国王的烦恼" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/10/28/%E5%9B%BD%E7%8E%8B%E7%9A%84%E7%83%A6%E6%81%BC/" class="article-date">
  <time datetime="2020-10-27T23:58:00.000Z" itemprop="datePublished">2020-10-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      国王的烦恼
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="历届试题-国王的烦恼"><a href="#历届试题-国王的烦恼" class="headerlink" title="历届试题 国王的烦恼"></a>历届试题 国王的烦恼</h3><p>问题描述<br>C国由n个小岛组成，为了方便小岛之间联络，C国在小岛间建立了m座大桥，每座大桥连接两座小岛。两个小岛间可能存在多座桥连接。然而，由于海水冲刷，有一些大桥面临着不能使用的危险。</p>
<p>如果两个小岛间的所有大桥都不能使用，则这两座小岛就不能直接到达了。然而，只要这两座小岛的居民能通过其他的桥或者其他的小岛互相到达，他们就会安然无事。但是，如果前一天两个小岛之间还有方法可以到达，后一天却不能到达了，居民们就会一起抗议。</p>
<p>现在C国的国王已经知道了每座桥能使用的天数，超过这个天数就不能使用了。现在他想知道居民们会有多少天进行抗议。</p>
<p>输入格式<br>输入的第一行包含两个整数n, m，分别表示小岛的个数和桥的数量。<br>接下来m行，每行三个整数a, b, t，分别表示该座桥连接a号和b号两个小岛，能使用t天。小岛的编号从1开始递增。</p>
<p>输出格式<br>输出一个整数，表示居民们会抗议的天数。</p>
<p>样例输入<br>4 4<br>1 2 2<br>1 3 2<br>2 3 1<br>3 4 3</p>
<p>样例输出<br>2</p>
<p>样例说明<br>第一天后2和3之间的桥不能使用，不影响。<br>第二天后1和2之间，以及1和3之间的桥不能使用，居民们会抗议。<br>第三天后3和4之间的桥不能使用，居民们会抗议。</p>
<p>数据规模和约定<br>对于30%的数据，1&lt;=n&lt;=20，1&lt;=m&lt;=100；<br>对于50%的数据，1&lt;=n&lt;=500，1&lt;=m&lt;=10000；<br>对于100%的数据，1&lt;=n&lt;=10000，1&lt;=m&lt;=100000，1&lt;=a, b&lt;=n， 1&lt;=t&lt;=100000。</p>
<hr>
<h4 id="——-分割线之初入江湖-——"><a href="#——-分割线之初入江湖-——" class="headerlink" title="—— 分割线之初入江湖 ——"></a>—— 分割线之初入江湖 ——</h4><hr>
<p>分析：<br>这道题一定要认真读题<br>题中有句话：“如果前一天两个小岛之间还有方法可以到达，后一天却不能到达了，居民们就会一起抗议”。这句话针对的仅仅是某两座小岛，而并非所有的小岛，举个例子，如下图所示：<br><img src="https://img-blog.csdnimg.cn/20200328173840562.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70" alt="第1天"><br>第1天，所有小岛均正常，无任何居民抗议<br>第2天，桥d损坏（如下图所示），此时小岛3和小岛4的居民由于在第1天能互通而现在不能互通，于是开始抗议。这是抗议的第1次。<br><img src="https://img-blog.csdnimg.cn/20200328174131940.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70" alt="第2天"><br>第3天，桥c损坏（如下图所示），此时小岛1和小岛3仍能互通（通过小岛2），因此无任何居民抗议。此时你肯定有疑惑了，为什么小岛3和小岛4的居民不抗议呢？如果你产生了这样的疑惑，那么恭喜你，你和我犯了一样的错！兄弟，看清题目：“如果前一天两个小岛之间还有方法可以到达，后一天却不能到达了，居民们就会一起抗议”。在第2天的时候，小岛3和小岛4就已经不互通了，现在到了第3天它们依然不互通，所以根本不会抗议！<br><img src="https://img-blog.csdnimg.cn/20200328174332782.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70" alt="第3天"><br>因此我们得出结论：抗议与否是由两个小岛在两天之间是否发生了连通分支数增加的事件所决定的，换言之，一旦某个桥的损坏导致了两个小岛不互通，就仅仅是会抗议那一天，之后就没它们的什么事儿了。<br>都走到这步了，我们就继续演示这个过程吧<br>第4天，桥a损坏（如下图所示），此时小岛1和小岛3的居民由于在第3天能互通而现在不能互通，于是开始抗议。这是抗议的第2次。<br><img src="https://img-blog.csdnimg.cn/20200328174512144.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70" alt="第4天"><br>第5天，此时桥b仍未损坏（如上图所示），由于在第4天的时候小岛1与小岛2、小岛1与小岛3、小岛3与小岛4均不能互通，而在第5天的情况依然如此，所以此时没有任何居民会抗议<br>第6天，桥b损坏（如下图所示），显然此时小岛2与小岛3的居民会抗议，这是抗议的第3次<br><img src="https://img-blog.csdnimg.cn/20200328174642280.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70" alt="第5天"><br>于是对于我给出的这个测试样例，程序最终应该输出3<br>上述演示过程实际上也给我们提供了一种解题的思路：模拟<br>怎么个模拟法？很简单，首先我们定义一个结构体Bridge（包含了桥的可用天数day，以及其连接的两座小岛的序号x和y），如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Bridge</span>		//代表桥 </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> x,y;		<span class="comment">//表示桥连接的两个地方 </span></span><br><span class="line">	<span class="keyword">int</span> day;		<span class="comment">//表示这个桥的可用时限（天数）</span></span><br><span class="line">	Bridge()&#123; &#125;</span><br><span class="line">	Bridge(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> c):x(a),y(b),day(c)&#123; &#125; </span><br><span class="line">&#125;;</span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>

<p>然后把输入的多个桥的数据放进一个Bridge型数组中，并根据这些桥的可用时限进行一个升序排序<br>在录入桥的信息后，我们通过并查集来将把这些桥的联通情况记录下来<br>接着，就开始模拟上面的过程了<br>首先是一个循环i，该循环的次数为录入的桥的数量，循环里的内容如下：<br>模拟当前的桥bridge[i]损坏，并判断此时整个小岛所构成的并查集中是否有发生连通分支数的增加<br>如果是：说明桥bridge[i]的损坏会导致其连接的两个小岛的居民抗议，于是执行ans++<br>否则：说明桥bridge[i]的损坏不会使其连接的两个小岛的居民抗议，因此不执行ans++<br>最后输出答案即可<br>不过有一个情况似乎被遗漏掉了，接下来我们看一下另一组测试数据（情况如下）：<br><img src="https://img-blog.csdnimg.cn/20200328174833738.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70" alt="特殊情况"><br>注意到可用时限为1天的桥有两座（桥b和桥c），那么在第2天时，小岛1和小岛3、小岛3和小岛4的居民就由第1天的能互通变成了现在的不互通，因此ans++。但是我们的程序是顺序执行的（通过一个循环），因此在执行的时候会将这种情况作为两次不同的情况来处理，于是会导致程序ans++两次。而实际上，尽管那一天是两座桥损坏，但是却是再同一天啊！因此居民只会抗议那一天！<br>处理这个情况很简单，我们只需要在i循环内，预先探测下一个桥的可用时限(bridge[i+1].day)。这样在循环时，我们每次都先用bridge[i+1].day来和当前桥的使用时限(bridge[i].day)进行对比，如果两个天数不一致，则直接模拟当前桥被损坏的过程；否则，跳过当前循环。这样一来就能避免在这种情况下执行两次（甚至更多的）ans++。</p>
<p>这样的思路很清晰，也很简单。但是往往想法很美好，现实却很残酷。<br>对于i循环，其循环次数为桥的数量，题目给的最大的桥的数量为105<br>而在i循环内部，模拟桥bridge[i]损坏却相当麻烦，因为每当某座桥损坏，我们都必须重新将剩下的所有小岛进行一个Unite操作，然后再扫描所有小岛构成的并查集，以检测其连通分支数是否发生改变。在这个过程中，将剩下的小岛进行Unite操作是一个O(n)级别，扫描小岛构成的并查集也是一个O(n)级别。即，在i循环内部是一个2*O(n)级别的操作<br>综上，此种方法下，程序的时间复杂度在O(n2)级别，那么在105的极限情况下，程序必然超时无疑<br>因此我们必须换一种思路（个人认为，当换了这样的思路之后，整个题的大门就立刻被打开了）</p>
<hr>
<h4 id="——-分割线之踏雪寻梅-——"><a href="#——-分割线之踏雪寻梅-——" class="headerlink" title="—— 分割线之踏雪寻梅 ——"></a>—— 分割线之踏雪寻梅 ——</h4><hr>
<p>题目要我们做的是求居民抗议的天数。我们如果从一开始去模拟一座桥一座桥的坏掉，那有可能遇到很坏的情况——在很后面才遇到那个割线（离散数学术语，表示当当前边被除去后，整个图的连通分支数就由1变为了2）。而你在每一次坏掉一座桥的时候都需要从头去联合这些桥以判断所有小岛的连通性，这样必然会超时。那我们完全可以逆向思维，不去模拟桥的坏掉，而是去模拟“桥的修建”！！！这样一来我们的程序就只需要循环一次去联合(unite)这些桥，一旦出现某座桥在进行Unite操作时，该桥的Unite操作导致了其连接的两个小岛的代表元发生变化（说明该桥是一条割线），就表示这个桥的损坏会使某两个小岛的居民由前一天的互通变为后一天的不互通，也就是说需要执行一次ans++。采用这样逆向修建的思路，我们就需要将给出的测试数据由桥的使用时限进行降序排序（此时使用时间最长的就是最开始被枚举的！因为它最晚坏，所以在逆向看来它是最先修建的）。<br>接下来我们用题目给的测试数据进行一个演示（已经进行了降序排序）：<br><img src="https://img-blog.csdnimg.cn/20200328175102223.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70" alt="测试数据"><br>首先一开始（第4天），是4座互相孤立的小岛，此时所有居民均不互通，如下：<br><img src="https://img-blog.csdnimg.cn/20200328174642280.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70" alt="第4天"><br>① 时间来到第3天，小岛3和小岛4之间的桥被修建好（如下图所示），那么此时小岛3和小岛4的居民就由第4天的不互通变成了现在的互通。反过来就是在第3天时小岛3和小岛4的居民互通，但是在第4天就不互通了，因此这两座小岛上的居民会抗议，即ans++。<br><img src="https://img-blog.csdnimg.cn/20200328175302946.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70" alt="第3天"><br>② 接下来是第2天，修建了小岛1和小岛2之间的桥（如下图所示）<br><img src="https://img-blog.csdnimg.cn/20200328175433699.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70" alt="第2天"><br>此时小岛1和小岛2的居民由第3天的不互通变成了现在的互通。反过来就是在第2天时小岛1和小岛2的居民互通，但是在第3天就不互通了，因此这两座小岛上的居民会抗议，即ans++。<br>现在有个问题，在天数为2的小桥中，还有一座啊！接下来程序继续扫描，遇到了同样是使用时限为2的另一座小桥，但是它连接的是小岛1与小岛3（此时情况如下）。<br><img src="https://img-blog.csdnimg.cn/20200328175556822.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70" alt="第2天"><br>根据上面的分析：小岛1和小岛3的居民由第3天的不互通变成了现在的互通。反过来就是在第2天时小岛1和小岛3的居民互通，但是在第3天就不互通了，因此这两座小岛上的居民会抗议，即ans++。<br>但是实际上，这一天依然还是第2天，也就是说实际情况是：第2天，桥a和桥b都在，小岛1和小岛2、小岛1和小岛3都是联通的，但是在第3天的时候，这两座桥都损坏了，于是小岛1、2、3彼此被分割开，因此这3座小岛的居民就开始抗议，但是仅抗议这1天，即ans++只执行一次。<br>由于我们的程序是顺序执行的，因此其会将这个情况视为两天不同的情况。我们如何规避？<br>通过一个lastDay变量即可，这个变量的作用是记录前一次某个桥的使用天数，如果在循环中，检测到当前桥的使用天数和lastDay不相等，并且将当前桥连接的两个小岛进行Unite操作后其确实使得这两个岛的代表元发生了改变，就说明此时需要执行ans++，否则一律不执行。</p>
<p>③ 接下来时间来到第1天，此时所有小岛的连通情况如下图所示：<br><img src="https://img-blog.csdnimg.cn/20200328175721975.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RoZV9aRUQ=,size_16,color_FFFFFF,t_70" alt="第1天"><br>这一天，所有小岛之间是保持着连通性的，和第2天情况一样，所以这里不执行ans++。<br>此时i循环结束，输出ans=2<br>以上便是通过转换思路后得到的解题方法，可见其时间复杂度仅为O(n)，这在m=105的极限情况下仍能保持较好的性能，因此完全可行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;algorithm&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">const int N&#x3D;10010;</span><br><span class="line">const int M&#x3D;100010;</span><br><span class="line">struct Bridge		&#x2F;&#x2F;代表桥 </span><br><span class="line">&#123;</span><br><span class="line">	int x,y;		&#x2F;&#x2F;表示桥连接的两个地方 </span><br><span class="line">	int day;		&#x2F;&#x2F;表示这个桥的可用时限（天数）</span><br><span class="line">	Bridge()&#123; &#125;</span><br><span class="line">	Bridge(int a,int b,int c):x(a),y(b),day(c)&#123; &#125; </span><br><span class="line">&#125;; </span><br><span class="line">Bridge bridge[M];	&#x2F;&#x2F;用于存储所有的桥 </span><br><span class="line">int pre[N];		   	&#x2F;&#x2F;用于存储每个小岛的“上级” </span><br><span class="line"></span><br><span class="line">void init(int n)</span><br><span class="line">&#123;</span><br><span class="line">	for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">		pre[i]&#x3D;i;</span><br><span class="line">&#125;</span><br><span class="line">int find_pre(int n)</span><br><span class="line">&#123;</span><br><span class="line">	if(pre[n]&#x3D;&#x3D;n) return n;</span><br><span class="line">	else return pre[n]&#x3D;find_pre(pre[n]);</span><br><span class="line">&#125;</span><br><span class="line">bool unite(int x,int y)</span><br><span class="line">&#123;</span><br><span class="line">	int rootx&#x3D;find_pre(x);</span><br><span class="line">	int rooty&#x3D;find_pre(y);</span><br><span class="line">	if(rootx!&#x3D;rooty)&#123;</span><br><span class="line">		pre[rootx]&#x3D;rooty;</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line">	else return false;</span><br><span class="line">&#125;</span><br><span class="line">bool cmp(Bridge a,Bridge b)</span><br><span class="line">&#123; return a.day&gt;b.day; &#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	int n,m,a,b,t;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	init(n);</span><br><span class="line">	for(int i&#x3D;1;i&lt;&#x3D;m;i++)&#123;</span><br><span class="line">		cin&gt;&gt;a&gt;&gt;b&gt;&gt;t;</span><br><span class="line">		bridge[i]&#x3D;Bridge(a,b,t);</span><br><span class="line">	&#125;</span><br><span class="line">	sort(bridge+1,bridge+1+m,cmp);</span><br><span class="line">	int ans&#x3D;0,lastDay&#x3D;0;							&#x2F;&#x2F;lastDay用于探测一次某个桥的生命时限 </span><br><span class="line">	for(int i&#x3D;1;i&lt;&#x3D;m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		bool flag&#x3D;unite(bridge[i].x,bridge[i].y);	&#x2F;&#x2F;如果为真表示当前这两个岛未联通</span><br><span class="line">		if(flag &amp;&amp; bridge[i].day!&#x3D;lastDay)	 		&#x2F;&#x2F;未连通，且此桥的天数是第一次出现，那么就增加了抗议的天数 </span><br><span class="line">		&#123;</span><br><span class="line">			ans++;</span><br><span class="line">			lastDay&#x3D;bridge[i].day;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/10/28/%E5%9B%BD%E7%8E%8B%E7%9A%84%E7%83%A6%E6%81%BC/" data-id="ckmdlisyf0004lsel0rumene3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/11/22/tenserflow-python/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          tenserflow+python
        
      </div>
    </a>
  
  
    <a href="/2020/10/25/%E5%9C%B0%E5%AE%AB/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">地宫</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/1/" rel="tag">1</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/1/" style="font-size: 10px;">1</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/03/17/Hill/">Hill</a>
          </li>
        
          <li>
            <a href="/2021/03/16/matrix/">matrix</a>
          </li>
        
          <li>
            <a href="/2020/11/22/tenserflow-python/">tenserflow+python</a>
          </li>
        
          <li>
            <a href="/2020/10/28/%E5%9B%BD%E7%8E%8B%E7%9A%84%E7%83%A6%E6%81%BC/">国王的烦恼</a>
          </li>
        
          <li>
            <a href="/2020/10/25/%E5%9C%B0%E5%AE%AB/">地宫</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>